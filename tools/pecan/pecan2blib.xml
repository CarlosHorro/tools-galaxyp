<tool id="pecan2blib" name="pecan2blib" version="0.1.0">
    <description>Convert PECAN results after percolator (.peptides) into spectral library (.blib)</description>
    <requirements>
        <requirement type="package" version="0.9.9.3">pecan</requirement>
    </requirements>
    <stdio>
        <exit_code range="1:" />
    </stdio>
    <command><![CDATA[
        pecan2blib -o pecan_spectral_lib --ionTypes=$ionTypes -q $qValue $toMinutes 
        #if $extension and str($extension):
            -e $extension
        #end if
        -l $percolator_results
        && cat "pecan_spectral_lib"*.blib > '$spectral_lib'
    ]]></command>
    <inputs>
        <param name="percolator_results" type="data" format="percout" multiple="true" label="percolator results"/>
        <param name="ionTypes" type="select" label="Fragment ion types" help="suggested HCD: y, reCID: by">
            <option value="by">by</option>
            <option value="y">y</option>
            <option value="b">b</option>
        </param>
        <param name="qValue" type="float" value="0.01" label="q-value threshold"/>
        <param name="toMinutes" type="boolean" truevalue="--toMinutes" falsevalue="" checked="false" 
           label="Convert retention time from seconds to minutes"
           help="Only needed when mzML files recorded retention time in seconds"/>
        <param name="extension" type="text" value="" optional="true" label="raw file extension for skyline"
            help="original file extension (e.g. raw/wiff) for proper Skyline views"/>

    </inputs>
    <outputs>
        <data name="spectral_lib" format="sqlite" />
    </outputs>
    <help><![CDATA[
        TODO: Fill in help.
    ]]></help>
</tool>
